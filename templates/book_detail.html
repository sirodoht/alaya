{% extends "layout.html" %}

{% block title %}{{ book.title }}{% endblock title %}

{% block content %}
<section>
    <div class="page-row">
        <div class="page-header">
            <h1>{{ book.title }}</h1>
            {% if let Some(author) = book.author %}
            <p class="books-detail-author">{{ author }}</p>
            {% endif %}
        </div>
    </div>

    {% if let Some(year) = book.publication_year %}
    <div class="page-row">
        <div class="page-content">
            <span class="page-label">Publication Year</span>
            <span class="page-value">{{ year }}</span>
        </div>
    </div>
    {% endif %}

    <div class="page-row">
        <div class="page-content">
            <span class="page-label">Amazon UK</span>
            <span class="page-value">
                <a href="https://www.amazon.co.uk/s?k={{ book.title|urlencode }}{% if let Some(author) = book.author %}+{{ author|urlencode }}{% endif %}" target="_blank">search amz →</a>
            </span>
        </div>
    </div>

    <div class="page-row">
        <div class="page-content">
            <span class="page-label">World of Books</span>
            <span class="page-value">
                <a href="https://www.worldofbooks.com/en-gb/search?q={{ book.title|urlencode }}{% if let Some(author) = book.author %}+{{ author|urlencode }}{% endif %}" target="_blank">search wob →</a>
            </span>
        </div>
    </div>

    <div class="page-row">
        <div class="page-content">
            <span class="page-label">Added</span>
            <span class="page-value">{{ book.created_date() }}</span>
        </div>
    </div>

    {% if let Some(filepath) = book.filepath %}
    <div class="page-row">
        <div class="page-content">
            <span class="page-label">File</span>
            <span class="page-value">{{ filepath }}</span>
        </div>
    </div>
    {% endif %}

    {% if let Some(notes) = book.notes %}
    <div class="page-row">
        <div class="page-content">
            <span class="page-label page-noteslabel">Notes</span>
            <span class="page-value page-notes">{{ notes }}</span>
        </div>
    </div>
    {% endif %}

    <div class="page-row">
        <div class="page-content page-actions">
            {% if is_authenticated %}
            <a href="/books/{{ book.id }}/edit" class="btn">edit</a>
            <a href="/books/{{ book.id }}/edit-notes" class="btn">edit notes</a>
            <a href="/books/{{ book.id }}/edit-chat" class="btn">edit in chat</a>
            <form method="post" action="/books/{{ book.id }}/delete" onsubmit="return confirm('sure?');">
                <button type="submit" class="btn">delete</button>
            </form>
            {% endif %}
            {% if book.filepath.is_some() %}
            <a href="/books/{{ book.id }}/download" class="btn">download</a>
            {% endif %}
        </div>
    </div>

</section>
{% endblock content %}
