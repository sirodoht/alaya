{% extends "layout.html" %}

{% block title %}{{ book.title }}{% endblock title %}

{% block content %}
<section>
    <div class="page-row">
        <div class="page-header">
            <h1>{{ book.title }}</h1>
            {% if let Some(author) = book.author %}
            <p class="books-detail-author">{{ author }}</p>
            {% endif %}
        </div>
    </div>

    {% if let Some(year) = book.publication_year %}
    <div class="page-row">
        <div class="page-content">
            <span class="page-label">Publication Year</span>
            <span class="page-value">{{ year }}</span>
        </div>
    </div>
    {% endif %}

    {% if let Some(isbn) = book.isbn %}
    <div class="page-row">
        <div class="page-content">
            <span class="page-label">ISBN</span>
            <span class="page-value">{{ isbn }}</span>
        </div>
    </div>
    {% endif %}

    <div class="page-row">
        <div class="page-content">
            <span class="page-label">Added</span>
            <span class="page-value">{{ book.created_date() }}</span>
        </div>
    </div>

    {% if let Some(filepath) = book.filepath %}
    <div class="page-row">
        <div class="page-content">
            <span class="page-label">File</span>
            <span class="page-value">{{ filepath }}</span>
        </div>
    </div>
    {% endif %}

    {% if is_authenticated || book.filepath.is_some() %}
    <div class="page-row">
        <div class="page-content page-actions">
            {% if is_authenticated %}
            <form method="post" action="/books/{{ book.id }}/delete" onsubmit="return confirm('are you sure you want to delete this book?');">
                <button type="submit" class="btn">delete</button>
            </form>
            {% endif %}
            {% if book.filepath.is_some() %}
            <a href="/books/{{ book.id }}/download" class="btn">download</a>
            {% endif %}
        </div>
    </div>
    {% endif %}


</section>
{% endblock content %}
