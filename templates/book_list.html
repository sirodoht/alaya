{% extends "layout.html" %}

{% block title %}book notes{% endblock title %}

{% block content %}
<section>
    <div class="filters">
        <div class="filters-content">
            {% if notes %}
            <a href="/" class="filters-link">all books</a>
            <span class="filters-link filters-link-active">notes</span>
            {% else %}
            <span class="filters-link filters-link-active">all books</span>
            <a href="/?notes=true" class="filters-link">notes</a>
            {% endif %}
        </div>
    </div>

    {% if books.is_empty() %}
    <section>
        <div style="max-width: 1200px; margin: 0 auto;">
            <p><em>(no books)</em></p>
        </div>
    </section>
    {% else %}
    <div class="books-list">

        {% for book in books %}
        <div class="books-list-item">
            <a href="/books/{{ book.id }}" class="books-list-item-link">
                <div class="books-list-item-info">
                    <span class="books-list-item-title">
                        {% if book.title.is_empty() %}
                            {% if let Some(filepath) = book.filepath %}
                                {{ filepath }}
                            {% else %}
                                <em>(untitled)</em>
                            {% endif %}
                        {% else %}
                            {{ book.title }}
                        {% endif %}
                        {% if book.notes.is_some() %}
                        <span class="books-list-item-notes-icon" title="has notes">*</span>
                        {% endif %}
                    </span>
                    {% if let Some(author) = book.author %}
                    <span class="books-list-item-author">{{ author }}</span>
                    {% endif %}
                </div>
                <div class="books-list-item-meta">
                    {% if let Some(year) = book.publication_year %}
                    <span class="books-list-item-year">{{ year }}</span>
                    {% endif %}
                </div>
            </a>
        </div>
        {% endfor %}

    </div>
    {% endif %}
</section>
{% endblock content %}
